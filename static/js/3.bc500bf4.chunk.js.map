{"version":3,"sources":["../node_modules/fast-memoize/src/index.js","components/Page.js","components/Errors/ResourceError.js","loaders/buildings.ts","loaders/items.ts","components/Ingredients/CycleRate.js","components/Ingredients/Fraction.js","components/Ingredients/Rate.js","components/Ingredients/Ingredient.js","components/Resources/Recipe.js","components/Resources/RemoveIcon.js","components/Resources/Resource.js","components/ProductList.js"],"names":["monadic","fn","cache","serializer","arg","value","cacheKey","computedValue","get","call","this","set","variadic","args","Array","prototype","slice","arguments","apply","assemble","context","strategy","serialize","bind","strategyDefault","options","length","create","serializerDefault","JSON","stringify","ObjectWithoutPrototypeCache","Object","has","key","cacheDefault","module","exports","strategies","Page","children","useContext","onePerPage","leftMargin","memo","PageBorder","props","PageContent","ResourceFallback","slug","className","ErrorWrapper","getBuildingImageName","memoize","itemSlug","replace","data","icon","getItemIcon","itemImageSlug","image","ImageMap","console","log","CycleRate","perCycleLabel","cycleAmount","CycleAmount","SmallPart","Fraction","fraction","splits","hasWhole","whole","numer","denom","Rate","perMinFraction","perMin","RecipeContext","fractions","Ingredient","ingredient","test-id","src","process","alt","width","height","loading","perCycle","href","Wrapper","Header","Image","Name","Quantity","Recipe","recipe","id","product","Arrow","Title","Column","IngredientsWrapper","Secondary","RemoveIcon","handleClick","useCallback","dispatch","type","ProductAction","Sentry","category","message","level","Info","onClick","title","Resource","iconSrc","item","Details","Description","ProductList","React","hiddenTypes","useTransition","timeoutMs","startTransition","fetch","res","setData","e","filteredProducts","removedProducts","p","fallback"],"mappings":"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","file":"static/js/3.bc500bf4.chunk.js","sourcesContent":["//\n// Main\n//\n\nfunction memoize (fn, options) {\n  var cache = options && options.cache\n    ? options.cache\n    : cacheDefault\n\n  var serializer = options && options.serializer\n    ? options.serializer\n    : serializerDefault\n\n  var strategy = options && options.strategy\n    ? options.strategy\n    : strategyDefault\n\n  return strategy(fn, {\n    cache: cache,\n    serializer: serializer\n  })\n}\n\n//\n// Strategy\n//\n\nfunction isPrimitive (value) {\n  return value == null || typeof value === 'number' || typeof value === 'boolean' // || typeof value === \"string\" 'unsafe' primitive for our needs\n}\n\nfunction monadic (fn, cache, serializer, arg) {\n  var cacheKey = isPrimitive(arg) ? arg : serializer(arg)\n\n  var computedValue = cache.get(cacheKey)\n  if (typeof computedValue === 'undefined') {\n    computedValue = fn.call(this, arg)\n    cache.set(cacheKey, computedValue)\n  }\n\n  return computedValue\n}\n\nfunction variadic (fn, cache, serializer) {\n  var args = Array.prototype.slice.call(arguments, 3)\n  var cacheKey = serializer(args)\n\n  var computedValue = cache.get(cacheKey)\n  if (typeof computedValue === 'undefined') {\n    computedValue = fn.apply(this, args)\n    cache.set(cacheKey, computedValue)\n  }\n\n  return computedValue\n}\n\nfunction assemble (fn, context, strategy, cache, serialize) {\n  return strategy.bind(\n    context,\n    fn,\n    cache,\n    serialize\n  )\n}\n\nfunction strategyDefault (fn, options) {\n  var strategy = fn.length === 1 ? monadic : variadic\n\n  return assemble(\n    fn,\n    this,\n    strategy,\n    options.cache.create(),\n    options.serializer\n  )\n}\n\nfunction strategyVariadic (fn, options) {\n  var strategy = variadic\n\n  return assemble(\n    fn,\n    this,\n    strategy,\n    options.cache.create(),\n    options.serializer\n  )\n}\n\nfunction strategyMonadic (fn, options) {\n  var strategy = monadic\n\n  return assemble(\n    fn,\n    this,\n    strategy,\n    options.cache.create(),\n    options.serializer\n  )\n}\n\n//\n// Serializer\n//\n\nfunction serializerDefault () {\n  return JSON.stringify(arguments)\n}\n\n//\n// Cache\n//\n\nfunction ObjectWithoutPrototypeCache () {\n  this.cache = Object.create(null)\n}\n\nObjectWithoutPrototypeCache.prototype.has = function (key) {\n  return (key in this.cache)\n}\n\nObjectWithoutPrototypeCache.prototype.get = function (key) {\n  return this.cache[key]\n}\n\nObjectWithoutPrototypeCache.prototype.set = function (key, value) {\n  this.cache[key] = value\n}\n\nvar cacheDefault = {\n  create: function create () {\n    return new ObjectWithoutPrototypeCache()\n  }\n}\n\n//\n// API\n//\n\nmodule.exports = memoize\nmodule.exports.strategies = {\n  variadic: strategyVariadic,\n  monadic: strategyMonadic\n}\n","import { memo, useContext } from 'react'\nimport { styled } from '@linaria/react'\n\nimport { ProductContext } from '../context/ProductContext'\n\nexport const Page = ({ children }) => {\n\tconst [{ padLeftMargin, onePerPage }] = useContext(ProductContext)\n\n\treturn (\n\t\t<PageBorder leftMargin={padLeftMargin} onePerPage={onePerPage}>\n\t\t\t<PageContent>{children}</PageContent>\n\t\t</PageBorder>\n\t)\n}\n\nexport default memo(Page)\n\nconst PageBorder = styled.div`\n\tbackground: ${props => (props.debug ? 'lightgreen' : 'white')};\n\tborder: ${props => (props.debug ? '1px solid black' : 'none')};\n\twidth: 100%;\n\tpadding: 4mm;\n\tpadding-left: ${props => (props.leftMargin ? '12mm' : '4mm')};\n\tbox-sizing: border-box;\n\tpage-break-after: ${props => (props.onePerPage ? 'always' : 'inherit')};\n\tpage-break-inside: ${props => (props.onePerPage ? 'inherit' : 'avoid')};\n\n\t@media print {\n\t\tbackground: none;\n\t\tborder: none;\n\t}\n`\n\nconst PageContent = styled.div`\n\twidth: 100%;\n\theight: 100%;\n\tbox-sizing: border-box;\n\tpadding: 4px;\n`\n","import React, { memo } from 'react'\nimport { styled } from '@linaria/react'\n\nimport Page from 'components/Page'\n\nconst ResourceFallback = ({ slug }) => (\n\t<Page>\n\t\t<ErrorWrapper>\n\t\t\t<i className=\"fa fa-bomb\" />\n\t\t\t<span> An error occurred trying to render \"{slug}\". It has been reported and we will look into it.</span>\n\t\t</ErrorWrapper>\n\t</Page>\n)\n\nexport default memo(ResourceFallback)\n\nconst ErrorWrapper = styled.div`\n\tcolor: #606060;\n\n\t@media print {\n\t\tdisplay: none;\n\t}\n`\n","import memoize from 'fast-memoize'\n\nimport data from 'data/data.json'\n\n// TODO\nexport const getBuildingImageName = memoize((slug: string) => {\n\tconst itemSlug = slug.replace(/^building/g, 'item')\n\treturn (data as any)[itemSlug].icon\n})\n","import memoize from 'fast-memoize'\n\nimport { getBuildingImageName } from 'loaders/buildings'\nimport ImageMap from 'loaders/imageMap'\n\n//\nexport const getItemIcon = memoize((itemSlug: string, size: number = 256) => {\n\tconst itemImageSlug = `${getBuildingImageName(itemSlug)}.${256}.png`\n\tconst image = ImageMap.get(itemImageSlug)\n\tif (!image) {\n\t\tconsole.log(`No image found for ${itemSlug}`)\n\t}\n\treturn image\n})\n","import React, { memo, useContext } from 'react'\nimport { styled } from '@linaria/react'\n\nimport { RecipeContext } from 'context/RecipeContext'\n\n//\nconst CycleRate = ({ perCycle, perCycleLabel }) => {\n\tconst [{ cycleAmount }] = useContext(RecipeContext)\n\tif (!cycleAmount) return null\n\treturn (\n\t\t<CycleAmount>\n\t\t\t{perCycle}\n\t\t\t{perCycleLabel}\n\t\t</CycleAmount>\n\t)\n}\n\nexport default memo(CycleRate)\n\nconst CycleAmount = styled.span`\n\tmargin-right: 5px;\n`\n","import { memo } from 'react'\nimport { styled } from '@linaria/react'\n\nconst SmallPart = styled.span`\n\tfont-size: 0.8em;\n`\n\nconst Fraction = ({ fraction }) => {\n\tif (!fraction) return null\n\n\tif (fraction.indexOf('/') < 0) return fraction\n\n\tconst splits = fraction.split(' ')\n\tconst hasWhole = fraction.includes(' ')\n\tconst whole = hasWhole ? splits[0] : null\n\tconst numer = hasWhole ? splits[1].split('/')[0] : splits[0].split('/')[0]\n\tconst denom = hasWhole ? splits[1].split('/')[1] : splits[0].split('/')[1]\n\n\treturn (\n\t\t<>\n\t\t\t{whole && `${whole} `}\n\t\t\t<SmallPart>\n\t\t\t\t<sup>{numer}</sup>&frasl;<sub>{denom}</sub>&nbsp;\n\t\t\t</SmallPart>\n\t\t</>\n\t)\n}\n\nexport default memo(Fraction)\n","import { memo, useContext } from 'react'\n\nimport { RecipeContext } from 'context/RecipeContext'\n\nimport Fraction from './Fraction'\n\n//\nconst Rate = ({ perMinFraction, perMin }) => {\n\tconst [{ fractions }] = useContext(RecipeContext)\n\treturn <strong>{fractions ? <Fraction fraction={perMinFraction} /> : perMin}</strong>\n}\n\nexport default memo(Rate)\n","import React, { memo } from 'react'\nimport { styled } from '@linaria/react'\n\nimport { getItemIcon } from 'loaders/items'\n\nimport CycleRate from './CycleRate'\nimport Rate from './Rate'\n\nconst imageSize = 30\n\n//\nconst Ingredient = ({ ingredient }) => {\n\t// TODO - Change this.\n\tconst icon = getItemIcon(ingredient.slug)\n\n\treturn (\n\t\t<Wrapper test-id={ingredient.slug}>\n\t\t\t<Header>\n\t\t\t\t{ingredient.icon ? (\n\t\t\t\t\t<Image\n\t\t\t\t\t\tsrc={`${process.env.REACT_APP_STATIC_PATH || ''}${icon}`}\n\t\t\t\t\t\talt={ingredient.name}\n\t\t\t\t\t\twidth={imageSize}\n\t\t\t\t\t\theight={imageSize}\n\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t\t<CycleRate perCycleLabel={ingredient.rate.perCycleLabel} perCycle={ingredient.rate.perCycle} />\n\t\t\t\t<Name href={`#${ingredient.slug}`}>{ingredient.name}</Name>\n\t\t\t</Header>\n\t\t\t<Quantity>\n\t\t\t\t<Rate perMin={ingredient.rate.perMin} perMinFraction={ingredient.rate.perMinFraction} />\n\t\t\t\t<small>{ingredient.rate.perMinLabel}</small>\n\t\t\t</Quantity>\n\t\t</Wrapper>\n\t)\n}\n\nexport default memo(Ingredient)\n\nconst Wrapper = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin: 2px 0px;\n\tbackground: #ededed;\n\tpadding: 4px 5px;\n\tborder-radius: 5px;\n`\n\nconst Header = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tfont-size: 12px;\n\tline-height: 1.2;\n`\n\nconst Image = styled.img`\n\tmax-width: 100%;\n\twidth: ${imageSize}px;\n\theight: ${imageSize}px;\n\tmargin-right: 3px;\n`\n\nconst Name = styled.a`\n\tpadding-right: 3px;\n`\n\nconst Quantity = styled.div`\n\tline-height: 1.2;\n\twhite-space: nowrap;\n`\n","import React, { memo } from 'react'\nimport { styled } from '@linaria/react'\n\nimport Ingredient from 'components/Ingredients/Ingredient'\n\nconst Recipe = ({ recipe }) => {\n\treturn (\n\t\t<Wrapper id={recipe.name}>\n\t\t\t<Header>\n\t\t\t\t<Secondary>&nbsp;</Secondary>\n\t\t\t\t<Title>{recipe.name}</Title>\n\t\t\t\t<Secondary>{recipe.producedIn}</Secondary>\n\t\t\t</Header>\n\t\t\t<IngredientsWrapper>\n\t\t\t\t{/* Inputs */}\n\t\t\t\t<Column>\n\t\t\t\t\t{recipe.ingredients.map(ingredient => (\n\t\t\t\t\t\t<Ingredient ingredient={ingredient} key={`in-${ingredient.slug}`} />\n\t\t\t\t\t))}\n\t\t\t\t</Column>\n\t\t\t\t<Arrow>\n\t\t\t\t\t<i className=\"fa fa-arrow-alt-right\" />\n\t\t\t\t</Arrow>\n\t\t\t\t{/* Outputs */}\n\t\t\t\t<Column>\n\t\t\t\t\t{recipe.products.map(product => (\n\t\t\t\t\t\t<Ingredient ingredient={product} key={`out-${product.slug}`} />\n\t\t\t\t\t))}\n\t\t\t\t</Column>\n\t\t\t</IngredientsWrapper>\n\t\t</Wrapper>\n\t)\n}\n\nexport default memo(Recipe)\n\nconst Arrow = styled.div`\n\tflex: 0;\n\tmargin: 8px;\n\n\t@media (max-width: 400px) {\n\t\ttransform: rotate(90deg);\n\t}\n`\n\nconst Wrapper = styled.div`\n\tdisplay: flex;\n\tborder: 1px solid #999;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding: 8px;\n\tborder-radius: 5px;\n\tmargin: 4px 0;\n\tpage-break-inside: avoid;\n\tbreak-inside: avoid;\n\tmax-width: 100%;\n`\n\nconst Title = styled.h2`\n\tmargin: 0;\n\ttext-align: center;\n\tfont-size: 16px;\n\tline-height: 1.2;\n\twidth: 100%;\n`\n\nconst Column = styled.div`\n\tflex: 1;\n\twidth: 100%;\n`\n\nconst IngredientsWrapper = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\twidth: 100%;\n\n\t@media (max-width: 400px) {\n\t\tflex-direction: column;\n\t}\n`\n\nconst Secondary = styled.div`\n\tflex: 1 1 20%;\n\ttext-align: right;\n\tfont-size: 11px;\n\tfont-style: italic;\n\tjustify-content: flex-end;\n\talign-items: center;\n\tdisplay: flex;\n\tcolor: #444;\n`\n\nconst Header = styled.div`\n\tdisplay: flex;\n\tmargin-bottom: 4px;\n\twidth: 100%;\n`\n","import React, { memo, useCallback, useContext } from 'react'\nimport { styled } from '@linaria/react'\nimport * as Sentry from '@sentry/react'\n\nimport { ProductAction, ProductContext } from '../../context/ProductContext'\n\nconst RemoveIcon = ({ slug }) => {\n\tconst [, dispatch] = useContext(ProductContext)\n\n\tconst handleClick = useCallback(() => {\n\t\tdispatch({ type: ProductAction.REMOVE_PRODUCT, slug })\n\n\t\tSentry.addBreadcrumb({\n\t\t\tcategory: 'product-removed',\n\t\t\tmessage: `Removed: ${slug}`,\n\t\t\tlevel: Sentry.Severity.Info,\n\t\t})\n\t}, [dispatch, slug])\n\n\treturn (\n\t\t<Wrapper onClick={handleClick}>\n\t\t\t<i className=\"fas fa-times-circle\" title=\"Remove\" />\n\t\t</Wrapper>\n\t)\n}\n\nexport default memo(RemoveIcon)\n\nconst Wrapper = styled.span`\n\tfont-size: 16px;\n\tmargin-left: 8px;\n\tmargin-right: 8px;\n\t:hover {\n\t\tcolor: red;\n\t}\n\t@media (max-width: 400px) {\n\t\tdisplay: none;\n\t}\n\n\t@media print {\n\t\tdisplay: none;\n\t}\n`\n","import React, { memo } from 'react'\nimport { styled } from '@linaria/react'\n\nimport Page from 'components/Page'\nimport { getItemIcon } from 'loaders/items'\n\nimport Recipe from './Recipe'\nimport RemoveIcon from './RemoveIcon'\n// const Recipe = React.lazy(() => import('components/Resources/Recipe'))\n\nconst imageSize = 100\n\nconst Resource = ({ item, slug }) => {\n\tconst iconSrc = getItemIcon(slug)\n\n\treturn (\n\t\t<Page>\n\t\t\t<Header id={slug}>\n\t\t\t\t<Details>\n\t\t\t\t\t<Title>\n\t\t\t\t\t\t{item.name} <RemoveIcon slug={slug} />\n\t\t\t\t\t</Title>\n\t\t\t\t\t<Description>{item.description}</Description>\n\t\t\t\t</Details>\n\t\t\t\t{iconSrc && (\n\t\t\t\t\t<Image\n\t\t\t\t\t\talt={item.name}\n\t\t\t\t\t\tsrc={`${process.env.REACT_APP_STATIC_PATH || ''}${iconSrc}`}\n\t\t\t\t\t\twidth={imageSize}\n\t\t\t\t\t\theight={imageSize}\n\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Header>\n\t\t\t{item.recipes.map(recipe => (\n\t\t\t\t<Recipe recipe={recipe} key={recipe.slug} />\n\t\t\t))}\n\t\t</Page>\n\t)\n}\n\nexport default memo(Resource)\n\nconst Header = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n`\n\nconst Details = styled.div`\n\twidth: 100%;\n`\n\nconst Title = styled.h1`\n\tmargin-top: 0;\n\tmargin-bottom: 12px;\n\tdisplay: block;\n\tline-height: 1.2;\n\tdisplay: flex;\n\talign-items: center;\n\n\t@media (max-width: 400px) {\n\t\tfont-size: 24px;\n\t}\n`\n\nconst Description = styled.div`\n\tfont-size: 12px;\n\tmargin-right: 16px;\n\tline-height: 1.5;\n\n\t@media (max-width: 400px) {\n\t\tdisplay: none;\n\t}\n`\n\nconst Image = styled.img`\n\tdisplay: ${props => (props.src ? 'inherit' : 'none')};\n\tmax-width: 100%;\n\twidth: ${imageSize}px;\n\theight: ${imageSize}px;\n\tpadding: 8px;\n\tborder-radius: 5px;\n\tmargin-bottom: 4px;\n\tborder: 1px solid #999;\n`\n","import React, { memo, unstable_useTransition as useTransition } from 'react'\nimport { styled } from '@linaria/react'\nimport * as Sentry from '@sentry/react'\n\n// import { getMachineCraftableProducts } from 'loaders/recipes'\n// import rawData from 'data/data.json'\nimport ResourceError from 'components/Errors/ResourceError'\nimport Resource from 'components/Resources/Resource'\nimport { ProductContext } from 'context/ProductContext'\n\nimport Loading from './Loaders/Loading'\n\n// const Resource = React.lazy(() => import('components/Resources/Resource'))\n\nconst ProductList = () => {\n\tconst [{ removedProducts, hiddenTypes }] = React.useContext(ProductContext)\n\n\tconst [data, setData] = React.useState({})\n\tconst [startTransition /*, isPending*/] = useTransition({\n\t\t// TODO\n\t\ttimeoutMs: 3000,\n\t})\n\n\t//\n\tReact.useEffect(() => {\n\t\t// console.log('data.json loading...')\n\t\t// setTimeout(() => {\n\t\tfetch('/data.json')\n\t\t\t.then(res => res.json())\n\t\t\t.then(data => {\n\t\t\t\t// console.log('data.json loaded')\n\t\t\t\treturn startTransition(() => {\n\t\t\t\t\tsetData(data)\n\t\t\t\t})\n\t\t\t})\n\t\t\t.catch(e => console.error(e))\n\t\t// }, 3000)\n\t}, [])\n\n\t//\n\tconst filteredProducts = React.useMemo(() => {\n\t\t// console.log('memo.filteredProducts')\n\n\t\tconst newData = Object.keys(data).reduce((memo, slug) => {\n\t\t\t// filtered items\n\t\t\tif (removedProducts.includes(slug)) return memo\n\n\t\t\t// hidden types\n\t\t\tif (hiddenTypes.includes(data[slug].type)) return memo\n\n\t\t\t// items without recipes (reference in ingredients)\n\t\t\tif (data[slug].recipes.length === 0) return memo\n\n\t\t\tmemo[slug] = data[slug]\n\t\t\treturn memo\n\t\t}, {})\n\n\t\treturn newData\n\t}, [data, hiddenTypes, removedProducts])\n\n\tif (Object.keys(filteredProducts).length === 0) {\n\t\t// console.log('ProductList.loading')\n\t\treturn <Loading />\n\t}\n\n\t// console.log('ProductList.render')\n\n\treturn (\n\t\t<Wrapper>\n\t\t\t{Object.keys(filteredProducts).map(p => (\n\t\t\t\t<Sentry.ErrorBoundary key={p} fallback={<ResourceError slug={p} />}>\n\t\t\t\t\t<Resource slug={p} item={data[p]} />\n\t\t\t\t</Sentry.ErrorBoundary>\n\t\t\t))}\n\t\t</Wrapper>\n\t)\n}\n\nconst Wrapper = styled.div`\n\twidth: 100%;\n\tmax-width: 700px;\n\tbackground: white;\n`\n\nexport default memo(ProductList)\n"],"sourceRoot":""}